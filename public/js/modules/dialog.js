/*! Tomcat360.com (c) 2015 
	Author: Renzhao
*/
define("modules/dialog",["jQuery","log"],function(i,o,d){"use strict";var t=i("jQuery"),e=i("log"),l=e.log,a=e.error;if("undefined"==typeof t||"undefined"==typeof t.fn||"string"!=typeof t.fn.jquery)return a("Can not find jQuery."),!1;e.$(),l("Module Dialog is loading...");var n={type:"text",title:"This is jui dialog title",content:"This is jui dialog body.",href:"/",width:500},s='<div class="jui-dialog-mask"></div>',u='<div class="jui-dialog"><div class="jui-dialog-hd"><div class="jui-dialog-title"></div><a class="jui-dialog-close-btn">Ã—</a></div><div class="jui-dialog-bd"></div></div>';d.exports=function(i){l("dialog is initializing...");var o=t.extend({},n,i);0===t(".jui-dialog-mask").length&&t("body").append(s),0===t(".jui-dialog").length&&t("body").append(u);var d=(t(".jui-dialog-mask"),t(".jui-dialog"));t(".jui-dialog-close-btn");switch(t(".jui-dialog-title").text(o.title),o.type){case"text":t(".jui-dialog-bd").text(o.content);break;case"html":t(".jui-dialog-bd").html(o.content);break;case"ajax":t.ajax({url:o.href,async:!1,type:"get",dataType:"html",success:function(i){t(".jui-dialog-bd").html(i)},error:function(i){a(message)}})}t(".jui-dialog-bd").css("width",o.width);var e=d.height(),g=d.width(),c=t(window).height(),w=t(window).width();d.css({top:(c-e)/2,left:(w-g)/2});var r=null;t(".jui-dialog-mask,.jui-dialog").show(0,function(){t(window).on("scroll",function(){t(".jui-dialog").css({top:(t(window).height()-t(".jui-dialog").height())/2+window.scrollY,left:(t(window).width()-t(".jui-dialog").width())/2})}),t(window).on("resize",function(){"number"==typeof r&&r>=0&&clearTimeout(r),r=setTimeout(function(){var i=t(window).height(),o=t(window).width(),d={top:(i-e)/2+window.scrollY,left:(o-g)/2+window.scrollX};if(e>i){var l=.8*i;d=t.extend(!0,d,{height:l,top:(i-l)/2+window.scrollY}),cssData2=t.extend(!0,cssData2,{height:l})}else d=t.extend(!0,d,{height:e,top:(i-e)/2+window.scrollY});if(g-20>o){var a=.8*o;d=t.extend(!0,d,{width:a+20,left:(o-a)/2+window.scrollX})}else d=t.extend(!0,d,{width:g+20,left:(o-g)/2+window.scrollX});t(".jui-dialog").css(d),t(".jui-dialog-bd").css(cssData2)},500)})}),t(".jui-dialog-mask,.jui-dialog-close-btn").one("click",function(){t(".jui-dialog-mask,.jui-dialog").hide(0,function(){t(window).off("scroll resize")})}),l("dialog is initialized.")},l("Module Dialog is loaded.")});